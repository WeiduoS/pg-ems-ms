import org.apache.tools.ant.taskdefs.condition.Os

task npm_install(type: Exec) {
    String npm = get_npm_by_os();
    workingDir projectDir.toString();
    commandLine npm, 'install';
}

task npm_run_build(type: Exec) {
    dependsOn 'npm_install'
    String npm = get_npm_by_os();
    workingDir projectDir.toString();
    commandLine npm, 'run', 'build';
}

def get_npm_by_os() {
    String npm = 'npm';
    if(Os.isFamily(Os.FAMILY_WINDOWS)) {
        npm = 'npm.cmd'
    }
    return npm;
}